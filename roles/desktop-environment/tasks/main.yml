---
- name: Install xorg server
  pacman:
    name: "{{ item }}"
    state: present
  with_items:
    - libglvnd
    - mesa
    - xorg-server
    - xorg-xinput
    - xorg-xkill
    - xorg-server-xwayland
    - xorg-xinit
    - xorg-xrandr
    - xterm

- name: Install KDE
  pacman:
    name: "{{ item }}"
    state: present
  with_items:
    - phonon-qt5-gstreamer
    - libx264
    - plasma-meta
    - plasma-wayland-session
    - kdebase-meta
    - kdeutils-meta
    - dolphin-plugins
    - kde-gtk-config

- name: Enable SDDM
  service:
    name: sddm.service
    enabled: true

- name: Set SDDM config
  template:
    src: etc--sddm.conf.j2
    dest: /etc/sddm.conf
    owner: root
    group: root
    mode: 0644
    backup: true

- name: Install i3
  pacman:
    name: "{{ item }}"
    state: present
  with_items:
    - i3-gaps
    - i3blocks
    - i3lock
    - i3status
    - dmenu
    - rofi

- name: Install Theme Assets
  pacman:
    name: "{{ item }}"
    state: present
  with_items:
    - arc-gtk-theme
    - arc-kde
    - papirus-icon-theme
    - kvantum-theme-arc
    - arc-icon-theme
    - gnome-themes-standard
    - gnome-icon-theme

- name: Install AUR KCM's
  become: false
  aurman:
    name: "{{ item }}"
    state: present
  with_items:
    - systemd-kcm

- name: Install Theme Assets (AUR)
  become: false
  aurman:
    name: "{{ item }}"
    state: present
  with_items:
    - numix-icon-theme-git
    # - numix-folders-git # not working
    - numix-circle-icon-theme-git
    - numix-square-icon-theme-git
    - capitaine-cursors
    - capitaine-cursors-hidpi
